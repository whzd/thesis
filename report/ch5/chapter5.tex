% Chapter 5

\chapter{Implementation} % Main chapter title
\label{chap:Chapter5}

\section{Web Application}

A user interacts with the web application that was developed in React, an open-source JavaScript framework for building user interfaces.
Here, the user can search for the desired concept, as well as changing the page language.
This is also the place where the generated explanations are shown in plain text and in LGP by the avatar.
After each explanation, it is also presented their LGP Readability Score, which is presented more in depth in the following subsection, as well as feedback options.
If one of the presented explanations is not acceptable, it is possible for the user to request a new one.

\dots %TODO

\section{Explanation API}

When a concept is searched for, the input is sent to an API that was developed in Flask, a lightweight open-source Python web framework.
This API will generate a list of explanations using only web scrapping or a combination of web crawling, web scrapping and text summarization.
The approach to be used is set on its configuration file, and will depend on the initial source of information.
For websites where a single page can be a rich source of information like in Priberam\footnote{https://dicionario.priberam.org/}, the first approach can yield good results.
On the other hand, for websites where the information is scattered across many pages like Wikipedia\footnote{https://pt.wikipedia.org/wiki/Wikip\%C3\%A9dia:P\%C3\%A1gina_principal}, the second approach is ideal.

All the tasks that compose each approach were developed using Python libraries: Scrapy\footnote{https://scrapy.org/} for web-crawling, Beautiful Soup\footnote{https://www.crummy.com/software/BeautifulSoup/bs4/doc/} for web scrapping and Natural Language Toolkit (NLTK)\footnote{https://www.nltk.org/} for text summarization.

The list of explanations is sorted based on each explanation's LGP Readability Score, and the ones with the lowest score are selected.

The avatar and its database are projects that were previously developed by GILT and are used to enhance this project.

\dots %TODO

\section{LGP Readability Formula}

For a regular language, there are metrics, like the readability score, that can be used to classify each expression in order to sort them accordingly.
This score indicates how easily a reader would comprehend the text that he's reading.

There are multiple formulas that could be used for calculating this score in Portuguese, as shown in Table. %TODO REF.
However, there is none for the LGP.

When looking at the readability formulas for Portuguese, it is easy to notice that, all of them take in consideration the same variables, which are common in every written text: characters, complex words, syllables, words and sentences.

After analyzing the LGP signs, with the goal of creating a new readability calculation formula, all the shared variables where identified:

\begin{itemize}
    \item Hand configurations (CF) - The hand shape in a particular moment.
    \item Moments (MT) - The position of the hand in relation to the body.
    \item Hands (HS) - Both hands or only the dominant hand.
    \item Facial expressions (FE) - Motion or position of the face muscles.
\end{itemize}

Using those variables the following formula was created:

\begin{equation}
(0.7 \times CF + 0.3 \times MT + 1 \times FE) \times (0.5 \times HS)
\label{wordScore}
\end{equation}

This formula was tested using the signs from a local database that had the same values as the avatar database.
The constant values, that were initially set to 1, were manually adjusted to produce a more compact interval of results.
However, the constant value for the facial expressions was unaltered due to the current version of the avatar not supporting them.
In the Table \ref{table:signs} is shown an example of some signs and their readability score.

\begin{table}[H]
    \centering
    \caption{Readability scores example.}
    \label{table:signs}
    \begin{tabular}{l|l|l|l|l}
        {\bfseries Sign} & {\bfseries CF} & {\bfseries MT} & {\bfseries HS} & {\bfseries Score} \\
        \hline
        Javali & 1 & 1 & 1 & 1.00  \\
        \hline
        Fornecedor & 2 & 6 & 1 & 2.09  \\
        \hline
        Aux√≠lio & 2 & 4 & 2 & 3.59 \\
        \hline
        Consumo & 4 & 6 & 2 & 5.60 \\
        \hline
        Esclarecer & 7 & 7 & 2 & 8.00 \\
    \end{tabular}
\end{table}

In order to calculate the score of an entire sentence, the sum of the scores of each word were divided by the number of words in the sentence, creating the following formula:

\begin{equation}
    \frac{(0.7 \times CF + 0.3 \times MT + 1 \times FE) \times (0.5 \times HS)}{WO}
\label{sentecneScore}
\end{equation}

\dots %TODO

\section{Hosting}

reverse proxy

pm2 react service

systemctl flask service

certbot https

\dots %TODO
